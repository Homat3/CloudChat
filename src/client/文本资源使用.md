# 文本资源使用规范
## 前言
本文为 CloudChat 鸿蒙版开发 资源使用规范文件-文本篇

本文将规定开发过程中，对文本资源的使用方法

## 使用范围
在各个标记了 @Component 注解的组件对象中使用到的 UI 文本

即需要呈现给客户的文本，程序内逻辑文本、控制台输出文本和日志文本等其它后台文本内容无需使用

## 使用方法

1. 找到文本资源文件定义文件： [英文 string.json](entry/src/main/resources/base/element/string.json) 和 [中文 string.json](entry/src/main/resources/base/element/zh/element/string.json)
2. 在其中根对象的"string"列表中按照如下格式添加新的文本资源：
    ```json5
    {
      "name": "{error/text}.{page-name}.{usage}",
      "value": "XXXXXX"
    }
    ```
    其中
    
    error 表示当用户误操作时产生的错误提示框中的文本，text 表示 UI 正常显示的文本
    
    page-name 表示用到这个文本资源的页面名称（如 login，contact-list），采用英文字母小写+连字符(-)的形式
    
    usage 表示这个文本资源的名称，用大驼峰命名，描述文本含义（如 AccountOrPasswordRequireNotNull 代表 账号或密码不能为空
3. 接下来在代码中调用，调用分两种情况，见[在使用 build() 函数直接描述 UI 的情况下](#1-在使用-build-函数直接描述-ui-的情况下)和[在其它方法的处理过程中用到的情况下](#2-在其它方法的处理过程中用到的情况下)

### (1) 在使用 build() 函数直接描述 UI 的情况下
1. 首先在文本资源文件中定义好相关资源(见[使用方法](#使用方法))
2. 直接使用 $r() 函数来引用资源

    例如： 
 
    现在有如下文本资源定义分别位于[英文 string.json](entry/src/main/resources/base/element/string.json) 和 [中文 string.json](entry/src/main/resources/base/element/zh/element/string.json)
    ```json5
    {
      "name": "text.example.ForExample",
      "value": "For example"
    }
    ```
    ```json5
    {
      "name": "text.example.ForExample",
      "value": "举个例子"
    }
    ```
    你在 build() 函数中应该如此使用它，例如一个文本控件：
    ```extendtypescript
    Text($r(app.string.text.example.ForExample))
    ```

### (2) 在其它方法的处理过程中用到的情况下
1. 首先在文本资源文件中定义好相关资源(见[使用方法](#使用方法))
2. 直接使用 [util组件](entry/src/main/ets/core/util) 中定义的[load-resource系列函数](entry/src/main/ets/core/util/load-resource.ets)来引用资源

   例如：

   现在有如下文本资源定义分别位于[英文 string.json](entry/src/main/resources/base/element/string.json) 和 [中文 string.json](entry/src/main/resources/zh_CN/element/string.json)
    ```json5
    {
      "name": "text.example.ForExample",
      "value": "For example"
    }
    ```
    ```json5
    {
      "name": "text.example.ForExample",
      "value": "举个例子"
    }
    ```
   你在 private example() 函数中应该如此使用它，例如加载并输出一串资源文本：
    ```extendtypescript
    struct example{
      private example(): string{
        const text = loadStringResource(this.uiAbilityContext, $r(app.string.text.example.ForExample));
        return text;
      }
    }
    ```