<div class="contact-list-container">
  <!-- 顶部搜索区 -->
  <div class="search-section">
    <input type="text" class="search-input" placeholder="搜索联系人 / 聊天记录">
    <div class="action-buttons">
      <button class="settings-btn" title="添加联系人" (click)="showAddContact()">
        +
        <i class="fas fa-user-plus"></i>
      </button>
      <a routerLink="/settings" class="settings-btn" title="设置">
        S
        <i class="fas fa-cog"></i>
      </a>
    </div>
  </div>

  <!-- 联系人列表 -->
  <div class="contacts-list">
    @for (contact of contacts; track contact.contactId){
    <div class="contact-item" [class.selected]="contact.contactId === selectedContactId" (click)="selectContact(contact)">
      <div class="avatar-container">
        <div class="avatar" [class.online]="contact.online"></div>
      </div>
      <div class="contact-info">
        <div class="contact-name">{{ contact.username }}</div>
        <div class="last-message">{{ getLastMessageContent(contact) }}</div>
      </div>
      <div class="contact-meta">
        <div class="timestamp">{{ getLastMessageTime(contact) }}</div>
        @if (getUnreadCount(contact) > 0) {
        <div class="unread-count">
          {{ getUnreadCount(contact) > 99 ? '99+' : getUnreadCount(contact) }}
        </div>
        }
      </div>
    </div>
    }
  </div>
</div>
