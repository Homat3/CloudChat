<div class="contact-list-container">
  <!-- 顶部搜索区 -->
  <div class="search-section">
    <input type="text" class="search-input" placeholder="搜索联系人 / 聊天记录">
    <a routerLink="/settings" class="settings-btn" title="设置">
      S
      <i class="fas fa-cog"></i>
    </a>
  </div>

  <!-- 联系人列表 -->
  <div class="contacts-list">
    @for (contact of contacts; track contact.id){
    <div class="contact-item" [class.selected]="contact.id === selectedContactId" (click)="selectContact(contact)">
      <div class="avatar-container">
        <div class="avatar" [class.online]="contact.isOnline"></div>
      </div>
      <div class="contact-info">
        <div class="contact-name">{{ contact.name }}</div>
        <div class="last-message">{{ getLastMessage(contact) }}</div>
      </div>
      <div class="contact-meta">
        <div class="timestamp">{{ getLastMessageTime(contact) }}</div>
        @if (getUnreadCount(contact) > 0) {
        <div class="unread-count">
          {{ getUnreadCount(contact) > 99 ? '99+' : getUnreadCount(contact) }}
        </div>
        }
      </div>
    </div>
    }
  </div>
</div>